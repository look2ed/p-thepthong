<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panisara Thepthong — PhD Student</title>

  <link rel="stylesheet" href="asset/style.css" />
</head>

<body>
  <!-- TOP NAV -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="sq"></div>
        <div>
          <b>Panisara Thepthong</b>
          <span> / PhD Student</span>
        </div>
      </div>

      <nav class="nav" aria-label="Site navigation">
        <button class="active" data-tab="about">ABOUT ME</button>
        <button data-tab="pubs">PUBLICATIONS</button>
        <button data-tab="cv">CV</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- LEFT: ALWAYS VISIBLE -->
    <aside class="left">
      <div class="stack">
        <div class="card">
          <img class="avatar" src="asset/profile.jpg" alt="Profile photo of Panisara Thepthong" />
          <h1 class="name">Panisara<br/>Thepthong</h1>
          <div class="divider"></div>
          <div class="role">PhD Student</div>
        </div>
      </div>

      <div class="emails" aria-label="Emails">
        <h3>Email</h3>
        <a href="mailto:panisara.thepthong@cnrs-orleans.fr">panisara.thepthong@cnrs-orleans.fr</a>
        <a href="mailto:panisara.thepthong@gmail.com">panisara.thepthong@gmail.com</a>
      </div>

      <div class="iconRow" aria-label="Links">
        <!-- ORCID -->
        <a class="iconBtn" href="https://orcid.org/0000-0001-9597-1448" target="_blank" rel="noreferrer" aria-label="ORCID">
          <img class="iconImg orcid" src="asset/ORCID_iD.svg.png" alt="ORCID">
        </a>

        <!-- LinkedIn -->
        <a class="iconBtn" href="https://www.linkedin.com/in/panisara-thepthong-930a30258/" target="_blank" rel="noreferrer" aria-label="LinkedIn">
          <img class="iconImg" src="asset/linkedin-icon.svg" alt="LinkedIn">
        </a>

        <!-- GitHub (inline svg, fits circle) -->
        <a class="iconBtn" href="https://github.com/look2ed" target="_blank" rel="noreferrer" aria-label="GitHub">
          <svg class="iconSvg" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 .8a11.2 11.2 0 0 0-3.5 21.8c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.4-4-1.4-.6-1.4-1.4-1.8-1.4-1.8-1.1-.8.1-.8.1-.8 1.2.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.3 3.6 1 .1-.8.4-1.3.7-1.6-2.6-.3-5.3-1.3-5.3-5.8 0-1.3.5-2.4 1.2-3.2-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.3 1.2a11.3 11.3 0 0 1 6 0C17.8 2.9 18.8 3.2 18.8 3.2c.6 1.6.2 2.8.1 3.1.8.8 1.2 1.9 1.2 3.2 0 4.5-2.7 5.5-5.3 5.8.4.3.8 1 .8 2.1V22c0 .3.2.7.8.6A11.2 11.2 0 0 0 12 .8Z"/>
          </svg>
        </a>
      </div>
    </aside>

    <!-- RIGHT: CONTENT PANELS -->
    <section>
      <!-- ABOUT -->
      <article id="about" class="panel active">
        <div class="box">
          <h2>About Me</h2>
          <p>
            I am a PhD student in Space Physics at LPC2E, focusing on solar wind data analysis using spacecraft measurements.
            My research interests center on solar phenomena that drive and modulate interplanetary space weather, investigated
            through a combination of in-situ and remote-sensing observations. I am currently working on Type III radio-burst
            analysis using data from Parker Solar Probe (PSP) and Solar Orbiter (SolO). I am skilled in scientific data analysis,
            in-situ measurements, and quantitative research.
          </p>

          <div class="chips" aria-label="Keywords">
            <span class="chip">Plasma Physics</span>
            <span class="chip">Astrophysics</span>
            <span class="chip">Computational physics</span>
          </div>
        </div>
      </article>

      <!-- PUBLICATIONS -->
       <article id="pubs" class="panel">
  <!-- Publications block -->
  <div class="box">
    <h2>Publications</h2>
    <p class="subtitle">Generated from <code>publications.bib</code></p>

    <div id="pubList" class="pubList">Loading…</div>
  </div>

  <!-- Talks / Posters block (manual for now) -->
  <div class="box" style="margin-top:16px;">
    <h2>Talks / Posters</h2>
    <p class="subtitle">Add your talks/posters here (manual list for now).</p>

    <div class="talk">
      <div class="talkTitle"><strong>[Year]</strong> Title of talk/poster</div>
      <div class="talkMeta">Event: Conference / Seminar — City, Country</div>
      <div class="talkMeta">Type: Talk / Poster / Invited (optional)</div>
      <div class="pubLinks">
        <a class="pubLink" href="#" target="_blank" rel="noreferrer">Slides</a>
        <a class="pubLink" href="#" target="_blank" rel="noreferrer">Poster</a>
        <a class="pubLink" href="#" target="_blank" rel="noreferrer">Abstract</a>
      </div>
    </div>
  </div>
</article>


      

      <!-- CV -->
      <article id="cv" class="panel">
        <div class="box">
          <h2>CV</h2>
          <div class="cvActions">
            <a class="btn primary" href="Panisara_CV_2025.pdf" download>Download PDF</a>
            <a class="btn" href="Panisara_CV_2025.pdf" target="_blank" rel="noreferrer">Open in new tab</a>
          </div>

          <iframe src="Panisara_CV_2025.pdf" title="Panisara Thepthong CV"></iframe>
          <p class="mutedSmall">
            If the PDF doesn’t display on mobile, use “Download PDF”.
          </p>
        </div>
      </article>
    </section>
  </main>

  <script>
    const buttons = document.querySelectorAll(".nav button");
    const panels  = document.querySelectorAll(".panel");

    function show(tab, updateHash=true){
      buttons.forEach(b => b.classList.toggle("active", b.dataset.tab === tab));
      panels.forEach(p => p.classList.toggle("active", p.id === tab));
      if (updateHash) history.replaceState(null, "", "#" + tab);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    buttons.forEach(btn => btn.addEventListener("click", () => show(btn.dataset.tab)));

    const initial = (location.hash || "#about").slice(1);
    if ([...panels].some(p => p.id === initial)) show(initial, false);
  </script>

  <script>
  // ---- BibTeX -> HTML (simple, robust-enough for typical .bib files) ----
  const MY_NAME = "Panisara Thepthong";
  const BIB_PATH = "publications.bib"; // put file in repo root

  function stripOuterBracesOrQuotes(s){
    s = (s || "").trim();
    if ((s.startsWith("{") && s.endsWith("}")) || (s.startsWith('"') && s.endsWith('"'))){
      return s.slice(1, -1).trim();
    }
    return s;
  }

  function cleanLatex(s){
    // Minimal cleanup for common BibTeX braces; keeps it safe and readable.
    return (s || "")
      .replace(/[{}]/g, "")
      .replace(/\\&/g, "&")
      .trim();
  }

  function parseValue(text, startIndex){
    // Parses a BibTeX value starting at startIndex.
    // Supports: { ...balanced... }, " ... ", or bareword until comma/newline.
    let i = startIndex;
    while (i < text.length && /\s/.test(text[i])) i++;

    if (text[i] === "{"){
      let depth = 0;
      let out = "";
      while (i < text.length){
        const ch = text[i++];
        out += ch;
        if (ch === "{") depth++;
        else if (ch === "}"){
          depth--;
          if (depth === 0) break;
        }
      }
      return { value: out.trim(), next: i };
    }

    if (text[i] === '"'){
      let out = '"';
      i++;
      while (i < text.length){
        const ch = text[i++];
        out += ch;
        if (ch === '"' && out[out.length - 2] !== "\\") break;
      }
      return { value: out.trim(), next: i };
    }

    // bare value
    let out = "";
    while (i < text.length && text[i] !== "," && text[i] !== "\n" && text[i] !== "\r"){
      out += text[i++];
    }
    return { value: out.trim(), next: i };
  }

  function parseFields(fieldsText){
    const fields = {};
    let i = 0;

    while (i < fieldsText.length){
      // skip whitespace and commas
      while (i < fieldsText.length && (/\s/.test(fieldsText[i]) || fieldsText[i] === ",")) i++;
      if (i >= fieldsText.length) break;

      // read key
      let key = "";
      while (i < fieldsText.length && /[A-Za-z0-9_\-]/.test(fieldsText[i])){
        key += fieldsText[i++];
      }
      key = key.toLowerCase().trim();

      // skip spaces and '='
      while (i < fieldsText.length && /\s/.test(fieldsText[i])) i++;
      if (fieldsText[i] !== "="){ i++; continue; }
      i++; // '='
      while (i < fieldsText.length && /\s/.test(fieldsText[i])) i++;

      // read value
      const parsed = parseValue(fieldsText, i);
      i = parsed.next;

      let val = stripOuterBracesOrQuotes(parsed.value);
      val = cleanLatex(val);
      if (key) fields[key] = val;
    }

    return fields;
  }

  function parseBibtex(text){
    const entries = [];
    let i = 0;

    while (true){
      const at = text.indexOf("@", i);
      if (at === -1) break;
      i = at + 1;

      // entry type
      const m = text.slice(i).match(/^([A-Za-z]+)/);
      if (!m) break;
      const type = m[1].toLowerCase();
      i += m[1].length;

      // find opening brace
      while (i < text.length && /\s/.test(text[i])) i++;
      const open = text[i];
      if (open !== "{") { i++; continue; }
      i++; // skip '{'

      // key until comma
      let key = "";
      while (i < text.length && text[i] !== ","){ key += text[i++]; }
      key = key.trim();
      i++; // skip comma

      // fields until matching closing brace
      let depth = 1;
      let fieldsText = "";
      while (i < text.length && depth > 0){
        const ch = text[i++];
        if (ch === "{") depth++;
        if (ch === "}") depth--;
        if (depth > 0) fieldsText += ch;
      }

      const fields = parseFields(fieldsText);
      entries.push({ type, key, fields });
    }

    return entries;
  }

  function formatAuthorName(author){
    // Handles "Last, First" -> "First Last", otherwise keep as-is
    if (author.includes(",")){
      const [last, first] = author.split(",").map(s => s.trim());
      return `${first} ${last}`.trim();
    }
    return author.trim();
  }

  function boldMyName(authorDisplay){
    // bold if it matches your name strongly
    const a = authorDisplay.toLowerCase();
    const hit = a.includes("panisara") && a.includes("thepthong");
    return hit ? `<strong>${authorDisplay}</strong>` : authorDisplay;
  }

  function formatAuthors(authorField){
    // BibTeX: authors separated by ' and '
    const parts = (authorField || "").split(/\s+and\s+/i).map(s => s.trim()).filter(Boolean);
    const names = parts.map(formatAuthorName).map(boldMyName);
    return names.join(", ");
  }

  function doiLink(doi){
    if (!doi) return "";
    const safe = doi.trim();
    const href = `https://doi.org/${safe}`;
    return `<a class="pubLink" href="${href}" target="_blank" rel="noreferrer">DOI</a>`;
  }

  function renderPublications(entries){
    // Keep only entries that look like publications
    const pubs = entries.filter(e => e.fields && (e.fields.title && e.fields.author));

    // Sort by year (desc), fallback 0
    pubs.sort((a,b) => (parseInt(b.fields.year||"0",10) - parseInt(a.fields.year||"0",10)));

    const html = pubs.map(e => {
      const f = e.fields;
      const title = f.title || "";
      const authors = formatAuthors(f.author || "");
      const venue = f.journal || f.booktitle || f.publisher || "";
      const year = f.year || "";
      const doi = f.doi || "";

      const venueLine = [venue, year].filter(Boolean).join(" — ");

      return `
        <div class="pubItem">
          <div class="pubTitle">${title}</div>
          <div class="pubAuthors">${authors}</div>
          <div class="pubVenue">${venueLine}</div>
          <div class="pubLinks">
            ${doiLink(doi)}
            ${f.url ? `<a class="pubLink" href="${f.url}" target="_blank" rel="noreferrer">Link</a>` : ""}
          </div>
        </div>
      `;
    }).join("");

    const el = document.getElementById("pubList");
    el.innerHTML = html || "<div class='mutedSmall'>No publications found in publications.bib</div>";
  }

  async function loadBib(){
    const res = await fetch(BIB_PATH, { cache: "no-store" });
    if (!res.ok) throw new Error(`Cannot load ${BIB_PATH} (${res.status})`);
    return await res.text();
  }

  // Load once on page load
  (async function(){
    try{
      const bibText = await loadBib();
      const entries = parseBibtex(bibText);
      renderPublications(entries);
    }catch(err){
      const el = document.getElementById("pubList");
      if (el) el.innerHTML = `<div class="mutedSmall">Error loading publications: ${err.message}</div>`;
      // NOTE: if you're opening file:// locally, fetch may fail. Use Live Server.
      console.error(err);
    }
  })();
</script>

</body>
</html>
